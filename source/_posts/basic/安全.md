---
title: 安全相关
date: 2020-10-12 12:38:51
updated: 2020-10-1
index_img: /img/blog_img.jpg
categories:
- [基础,系统设计]
tags:
- Java
- 安全
---

常见的攻击:XSS攻击,CSRF攻击
CSRF攻击的方式是跨域伪请求,冒用用户身份,让服务器以为就是用户
** 预防方式: **
* 1.使用token认证 
第一次请求时服务器返回一个token(可使用JWT生成),以后每次请求都携带token,但是分布式时存在问题,每次请求都可能落在不同服务器上 导致token失效,因此得使用缓存来存储token.

* 2.使用双层cookie验证(适合小规模应用)
利用CSRF攻击无法获取cookie中的值的特点,用户首次访问网站时,向请求域名注入一个cookie;用户再次请求时在url上携带上取出的cookie,后端验证url携带的cookie与取出的cookie是否一致.

* 3.使用验证码.密码等可以
比如银行在登录状态下进行转账时也要再次输入密码.

## 加密算法
- **不可逆加密(散列算法/摘要加密):**  SHA,MD5,HMAC 防止MD5被破解,可以**加盐**.
- **可逆加密:** (秘钥+算法+密文【获得】原文)
    - 对称加密(symmetric): AES,DES 客户端用这个密钥给一段文字加密服务端收到这段字符串后会用同样的密钥进行解密.
    - 非对称加密(asymmetric): RSA,DSA 客户端和服务器用的不是同样的密钥分为公钥和秘钥.
> 打个比方，甲方生成了一对密钥然后把公钥公开提供给乙方也可以是乙1，乙2，乙3...，然后乙方拿着公钥进行加密，甲方拿着秘钥进行解密，如果记得不错的话支付宝接入就是用的RSA.所以RSA还是用的很普及的，比较适合于一些平台的加密。


**SHA-1与MD5的比较:**
因为二者均由MD4导出，SHA-1和MD5彼此很相似。相应的，他们的强度和其他特性也是相似，但还有以下几点不同：
* 对强行攻击的安全性：最显著和最重要的区别是SHA-1摘要比MD5摘要长32 位。使用强行技术，产生任何一个报文使其摘要等于给定报摘要的难度对MD5是2^128^数量级的操作，而对SHA-1则是2^160^数量级的操作。这样，SHA-1对强行攻击有更大的强度。
* 对密码分析的安全性：由于MD5的设计，易受密码分析的攻击，SHA-1显得不易受这样的攻击。
* 速度：在相同的硬件上，SHA-1的运行速度比MD5慢。

## 集群,分布式,微服务
* 分布式是指将**不同的业务**分布在不同的地方。
* 而集群指的是将几台服务器集中在一起，实现**同一业务**。
> 分布式是指将不同的业务分布在不同的地方。而集群指的是将几台服务器集中在一起，实现同一业务。

* 微服务是一种架构风格，一个大型复杂软件应用由一个或多个微服务组成。系统中的各个微服务可被独立部署，各个微服务之间是松耦合的。每个微服务仅关注于完成一件任务并很好地完成该任务。在所有情况下，每个任务代表着一个小的业务能力。

### cookie,session和token
- cookie: 不安全
- session: 占内存,跨域问题
服务器使用session把用户的信息临时保存在了服务器上，用户离开网站后session会被销毁。这种用户信息存储方式相对cookie来说更安全，可是session有一个**缺陷**：**如果web服务器做了负载均衡，那么下一个操作请求到了另一台服务器的时候session会丢失。**

- token优点:
无状态、可扩展
支持移动设备
跨程序调用
安全

